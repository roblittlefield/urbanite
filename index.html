<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https: data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com; connect-src 'self' https://data.sfgov.org https://api.openweathermap.org https://www.google-analytics.com">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="description" content="Urbanite SF is an interactive web app that provides near real-time access to San Francisco's dispatched law enforcement dispatched calls of service (10 minute delay). Explore the latest incidents near you, navigate to calls in different neighborhoods, and see police response times. Built using vanilla JavaScript, Urbanite SF offers a lightweight and fast user experience with zero pay-walls, no ads and no user data stored. Links auto redirect when DataSF archives the call after 48 hours." />
    <link rel="preload" as="image" href="https://stamen-tiles-b.a.ssl.fastly.net/terrain/14/2620/6333.jpg">
    <link rel="stylesheet" href="node_modules/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="src/css/style.css" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon-180x180.png">
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#a09c9c">
    <title>SFPD calls 🚔</title>
  </head>
  <body>
    <header></header>
    <main>
      <div id="map"></div>
      <div class="container">
        <div class="weather">
          <div id="containerTemp"></div>
        </div>
        <button id="project-info-btn">About</button>
        <button id="change-map-btn">Map</button>
        <button id="latest-list-btn">All SF</button>
        <button id="nearby-list-btn">Nearby</button>
        <button id="response-times-list-btn">RTs ⏱</button>
        <button id="car-breakins-btn">🚙 ⚒️</button>
        <div id="nearby-container">
          <div id="nearby-info"></div>
        </div>
        <div id="last-updated"></div>
        <div id="neighborhood-text"></div>
        <div class="hidden" id="car-breakins-text"></div>
        <div class="hidden" id="car-breakins-subtext">(Does not include online reports or unreported)</div>
        <div class="hidden" id="call-list-container">
          <h2 id="call-list-heading"></h2>
          <ul id="call-list"></ul>
          <h4 id="call-list-subheading"></h4>
        </div>
        <div class="hidden" id="response-times-container">
          <h2 id="response-times-heading">Median SFPD Response Times, Last 48h</h2>
          <h3 id="response-times-subheading">'Priority A' Calls (Target = 8 mins, June 2023 = 8.93 mins)</h3>
          <ul id = "response-times-list"></ul>
        </div>
        <div class="hidden" id="project-info-container">
          <div id="project-info">
            <h2 id="project-info-heading">Welcome to Urbanite SF 🌁  </h2>
            <p>Explore the last 48 hours of law enforcement dispatched calls for service in San Francisco.<br><br>&bull; Move around the map to different neighborhoods<br>&bull; See call details & SFPD response times<br>&bull; Change the map skin<br>&bull; View city-wide or nearby list of latest calls<br>&bull; Filter to just car break-ins/strips & stolen cars<br>&bull; Share links with others<br><br> Data reloads every minute. Links to raw data redirect when DataSF archives.</a><br><br>A personal project designed and developed in the Mission 🌯🌴🌴 using vanilla Javascript. <br><br>Information for ease of access purposes only. Do your own research and form your own opinions.</p>
          </div></div>
          <div class="hidden" id="addSFDataSource">
            <a href="https://datasf.gitbook.io/datasf-dataset-explainers/law-enforcement-dispatched-calls-for-service" class="centered-link">
              <img src="https://sf.gov/themes/custom/sfgovpl/logo.svg" alt="SF.gov Data" style="width: 10px; height: 10px; ">DataSF
            </a>
          </div>
          <div class="hidden" id="alert"></div>
        </main>
        
        <script type="module">
          window.addEventListener('load', () => {
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker
              .register(new URL('/service-worker.js', import.meta.url), { type: 'module' })
              .then((registration) => {
                // console.log('Service Worker registered:', registration);
              })
              .catch((error) => {
                console.log('Service Worker registration failed:', error);
              });
            }
          });
          </script>
        <script type="module" src="src/js/controller.js"></script>
        <link rel="stylesheet" href="src/css/style2.css" />
      </body>
      </html>
      