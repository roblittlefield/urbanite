<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https: data: https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net; connect-src 'self' https://data.sfgov.org https://api.openweathermap.org https://www.google-analytics.com https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net">
    <meta name="google-adsense-account" content="ca-pub-8239610031167796">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="description" content="SFPD calls is an interactive web app that provides near real-time access to San Francisco's law enforcement dispatched calls of service (10 minute delay). Explore the latest incidents near you, navigate to SFPD calls in different neighborhoods, and see police response times. Built using vanilla JavaScript, SFPD calls offers a lightweight and fast user experience with zero pay-walls, no ads, and no user data stored. Links auto redirect when DataSF archives the call after 48 hours." />
    <meta name="theme-color" content="#989898">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@SFPDcallsBot">
    <meta name="twitter:title" content="SFPD calls 🚔">
    <meta name="twitter:description" content="SFPD calls shows San Francisco law enforcement dispatched calls of service on an interactive map.">
    <meta name="twitter:image" content="https://i.imgur.com/5MdWABv.png">
    <link rel="stylesheet" href="node_modules/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="src/css/style.css" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon-180x180.png">
    <link rel="manifest" href="./manifest.json">
    <title>SFPD calls 🚔</title>
  </head>
  <body>
    <header></header>
    <main>
      <div id="map"></div>
        <div class="container">
          <div id="affiliate">
            <div class="affiliate-disclaimer">
            <P>Amazon Assoc: I earn from qualifying purchases.</P>
          </div>
          <div class="affiliate-1 hidden">
            <div>
              <a target="_blank" href='https://www.amazon.com/Ring-Floodlight-Cam-Wired-Plus/dp/B08F6GPQQ7?&_encoding=UTF8&tag=urbanite05-20&linkCode=ur2&linkId=dedaa68818a4470b76e99080f2999e89&camp=1789&creative=9325' rel='nofollow'><img src="https://i.imgur.com/Rt3pb6g.png" class="affiliate-target-1" alt="Ring Floodlight Security Camera" width="115px" height="100px" loading="lazy">
                <h3 class="affiliate-target-name-1">Ring Floodlight<br>Security Camera</h3>
              </a>
            </div>
        </div>
        <div class="affiliate-2 hidden">
          <div>
              <a target="_blank" href='https://www.amazon.com/Carhartt-Acrylic-Watch-Black-Size/dp/B0C4V522JG/ref=asc_df_B002G9UDYG?&_encoding=UTF8&tag=urbanite05-20&linkCode=ur2&linkId=930aea4a67a7201476d6b7f034755301&camp=1789&creative=9325' rel='nofollow'><img src="https://imgur.com/a/8ywReI3" class="affiliate-target-2" alt="Carhartt Knit Orange" width="90px"  loading="lazy">
                <h3 class="affiliate-target-name-2">Carhartt Knit</h3>
              </a>
          </div>
          
        </div>
        <div class="affiliate-3 hidden">
          <div>
              <a target="_blank" href='https://www.amazon.com/New-Apple-AirPods-Max-Green/dp/B08PZD76NP?&_encoding=UTF8&tag=urbanite05-20&linkCode=ur2&linkId=77451b28328474ac30e576c58a01ac53&camp=1789&creative=9325' rel='nofollow'><img src="https://i.imgur.com/BMKUJTt.png" class="affiliate-target-3" alt="Apple AirPods Max headphones" width="110px"  loading="lazy">
                <h3 class="affiliate-target-name-3">AirPods Max</h3>
              </a>
          </div>
          
        </div>
        <div class="affiliate-4 hidden">
          <div>
              <a target="_blank" href='https://www.amazon.com/Apple-MX542AM-A-AirTag-Pack/dp/B0932QJ2JZ/ref=zg_bs_g_electronics_sccl_1/145-5190070-0801643?&_encoding=UTF8&tag=urbanite05-20&linkCode=ur2&linkId=5570287a086a8fe0d8ce1421cc43cab1&camp=1789&creative=9325' rel='nofollow'><img src="https://i.imgur.com/y23sN82.png" class="affiliate-target-4" alt="Apple AirTags" width="120px" height="64.8px" loading="lazy">
                <h3 class="affiliate-target-name-4">Apple AirTags</h3>
              </a>  
          </div>
        </div>
        <div class="affiliate-5 hidden">
          <div>
            <a target="_blank" href='https://www.amazon.com/dp/B0BJM9PVRX?&_encoding=UTF8&tag=urbanite05-20&linkCode=ur2&linkId=ed2a78673d28c3cce4acd7f9b6e9eb76&camp=1789&creative=9325' rel='nofollow'><img src="https://i.imgur.com/9kJEVF9.jpg" class="affiliate-target-5" alt='iPad 11"' width="100px" height="113" style="border-radius: 9px;" loading="lazy">
              <h3 class="affiliate-target-name-5">iPad 11</h3>
            </a>
          </div>
          
        </div>
        <div class="affiliate-6 hidden">
          <div>
            <a target="_blank" href="https://www.amazon.com/Blink-Outdoor-Wireless-Security-Camera/dp/B086DKSYTS?&_encoding=UTF8&tag=urbanite05-20&linkCode=ur2&linkId=a1a7b64f7184d17f54e651b37ee9347e&camp=1789&creative=9325" rel="nofollow"><img src="https://i.imgur.com/mspjddX.jpg" class="affiliate-target-6" alt="Blink Outdoor 3" width="100px"  loading="lazy" style="border-radius: 10px;">
              <h3 class="affiliate-target-name-6">Blink Outdoor 3</h3>
            </a>
          </div>
          
        </div>
          </div>
        <div id="weather">
          <div id="containerTemp"></div>
        </div>
        <!-- <div class="vert-line" id="vert1"></div>
        <div class="vert-line" id="vert2"></div>
        <div class="vert-line" id="vert3"></div>
        <div class="vert-line" id="vert4"></div>
        <div class="vert-line" id="vert5"></div>
        <div class="vert-line" id="vert6"></div> -->
        <div id="button-container-1">
          <button id="project-info-btn" title="About this site" alt="About this site" type="button"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-info-square" focusable="false" viewBox="0 0 16 16">
            <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
            <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
          </svg></button>
          <button id="change-map-btn" title="Change map skin" alt="Change map skin" type="button"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-map" focusable="false" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.502.502 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103M10 1.91l-4-.8v12.98l4 .8V1.91zm1 12.98 4-.8V1.11l-4 .8zm-6-.8V1.11l-4 .8v12.98z"/>
          </svg></button>
        </div>
        <div id="button-container-2">
          <button id="response-times-list-btn" title="Response times by neighborhood" alt="Median response time list" type="button"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-stopwatch" focusable="false" viewBox="0 0 16 16">
            <path d="M8.5 5.6a.5.5 0 1 0-1 0v2.9h-3a.5.5 0 0 0 0 1H8a.5.5 0 0 0 .5-.5z"/>
            <path d="M6.5 1A.5.5 0 0 1 7 .5h2a.5.5 0 0 1 0 1v.57c1.36.196 2.594.78 3.584 1.64a.715.715 0 0 1 .012-.013l.354-.354-.354-.353a.5.5 0 0 1 .707-.708l1.414 1.415a.5.5 0 1 1-.707.707l-.353-.354-.354.354a.512.512 0 0 1-.013.012A7 7 0 1 1 7 2.071V1.5a.5.5 0 0 1-.5-.5M8 3a6 6 0 1 0 .001 12A6 6 0 0 0 8 3"/>
          </svg></button>
          <button id="car-breakins-btn" title="Car break-ins / GTA" alt="Car break-ins / GTA" type="button">
            <svg xmlns="http://www.w3.org/2200/svg" fill="currentColor" class="bi bi-car-front" focusable="false" viewBox="0 0 16 16">
            <path d="M4 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0m10 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2zM4.862 4.276 3.906 6.19a.51.51 0 0 0 .497.731c.91-.073 2.35-.17 3.597-.17 1.247 0 2.688.097 3.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 10.691 4H5.309a.5.5 0 0 0-.447.276"/>
            <path d="M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679c.033.161.049.325.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.807.807 0 0 0 .381-.404l.792-1.848ZM4.82 3a1.5 1.5 0 0 0-1.379.91l-.792 1.847a1.8 1.8 0 0 1-.853.904.807.807 0 0 0-.43.564L1.03 8.904a1.5 1.5 0 0 0-.03.294v.413c0 .796.62 1.448 1.408 1.484 1.555.07 3.786.155 5.592.155 1.806 0 4.037-.084 5.592-.155A1.479 1.479 0 0 0 15 9.611v-.413c0-.099-.01-.197-.03-.294l-.335-1.68a.807.807 0 0 0-.43-.563 1.807 1.807 0 0 1-.853-.904l-.792-1.848A1.5 1.5 0 0 0 11.18 3z"/>
          </svg>
        </button>
        <div id="button-container-3">
          <button id="text-message-btn" title="Text message this call" alt="Text message this call">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-chat-dots" viewBox="0 0 16 16">
              <path d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
              <path d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9.06 9.06 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.437 10.437 0 0 1-.524 2.318l-.003.011a10.722 10.722 0 0 1-.244.637c-.079.186.074.394.273.362a21.673 21.673 0 0 0 .693-.125zm.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6c0 3.193-3.004 6-7 6a8.06 8.06 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a10.97 10.97 0 0 0 .398-2"/>
            </svg>
          </button>
          <div id="text-message-content"></div>
          <button id="tweet-btn" title="Tweet this call" alt="Tweet this call">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-twitter-x" viewBox="0 0 16 16">
              <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"/>
            </svg>
          </button>
          <div id="tweet-content"></div>
      </div>
        <button id="nearby-list-btn" title="Nearby calls list" type="button" alt="Nearby calls List">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" alt="Nearby calls list" focusable="false" class="bi bi-crosshair" viewBox="0 0 16 16">
            <path d="M8.5.5a.5.5 0 0 0-1 0v.518A7.001 7.001 0 0 0 1.018 7.5H.5a.5.5 0 0 0 0 1h.518A7.001 7.001 0 0 0 7.5 14.982v.518a.5.5 0 0 0 1 0v-.518A7.001 7.001 0 0 0 14.982 8.5h.518a.5.5 0 0 0 0-1h-.518A7.001 7.001 0 0 0 8.5 1.018zm-6.48 7A6.001 6.001 0 0 1 7.5 2.02v.48a.5.5 0 0 0 1 0v-.48a6.001 6.001 0 0 1 5.48 5.48h-.48a.5.5 0 0 0 0 1h.48a6.002 6.002 0 0 1-5.48 5.48v-.48a.5.5 0 0 0-1 0v.48A6.001 6.001 0 0 1 2.02 8.5h.48a.5.5 0 0 0 0-1h-.48M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
          </svg>
        </button>
        </div>
        <button id="latest-list-btn" title="All SF calls list" type="button" alt="Latest calls list">All SF
          <!-- <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-list-ul" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
        </svg> -->
      </button>
        <div id="nearby-container">
          <div id="nearby-info"></div>
        </div>
        <div id="last-updated"></div>
        <div id="neighborhood-text"></div>
        <div class="hidden" id="car-breakins-text"></div>
        <div class="hidden" id="car-breakins-subtext">(Does not include online reports or unreported)</div>
        <div class="hidden" id="call-list-container">
          <h2 id="call-list-heading"></h2>
          <ul id="call-list"></ul>
          <h4 id="call-list-subheading"></h4>
        </div>
        <div class="hidden" id="response-times-container">
          <h2 id="response-times-heading">Median SFPD Response Times, Last 48h</h2>
          <h3 id="response-times-subheading">'Priority A' Calls (Target = 8 mins)</h3>
          <ul id = "response-times-list"></ul>
        </div>
        <div class="hidden" id="project-info-container">
          <div id="project-info">
            <h2 id="project-info-heading">Welcome to SFPD calls 🌁  </h2>
            <p>Explore the last 48 hours of law enforcement dispatched calls for service in San Francisco.<br><br>&bull; Move around the map<br>&bull; See call details & response times<br>&bull; Change the map skin<br>&bull; Filter car break-ins & thefts<br>&bull; View nearby or city-wide call list<br><br>Links to raw data redirect when DataSF archives. Follow <a target="_blank" href="https://twitter.com/SFPDcallsBot">@SFPDcallsBot</a> for alerts.<br><br>A personal project designed and developed in the Mission 🌯🌴🌴 using vanilla JavaScript.<br><br>Not associated with SFPD. All calls unverified. Information for ease of access purposes only. Do your own research.</p>
          </div></div>
          <div class="hidden" id="addSFDataSource" title="Data from DataSF" alt="Data from DataSF">
            <a target="_blank" href="https://datasf.gitbook.io/datasf-dataset-explainers/law-enforcement-dispatched-calls-for-service" class="centered-link">
              <img src="https://sf.gov/themes/custom/sfgovpl/logo.svg" alt="SF.gov logo" loading="lazy" style="width: 10px; height: 10px;">DataSF
            </a>
          </div>
          <div class="hidden" id="alert"></div>
        </main>
        
        <script type="module">
          window.addEventListener('load', () => {
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker
              .register(new URL('/service-worker.js', import.meta.url), { type: 'module' })
              .then((registration) => {
                // console.log('Service Worker registered:', registration);
              })
              .catch((error) => {
                console.log('Service Worker registration failed:', error);
              });
            }
          });
          </script>
        <script type="module" src="src/js/controller.js"></script>
        <link rel="stylesheet" href="src/css/style2.css" />
      </body>
      </html>
      