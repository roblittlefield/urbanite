<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https: data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com; connect-src 'self' https://data.sfgov.org https://api.openweathermap.org https://www.google-analytics.com">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="description" content="Urbanite SF is an interactive web app for that provides near real-time access to San Francisco's law enforcement dispatched calls of service (10 minute delay). Explore the latest incidents near you, navigate to SFPD calls in different neighborhoods, and see police response times. Built using vanilla JavaScript, Urbanite SF offers a lightweight and fast user experience with zero pay-walls, no ads, and no user data stored. Links auto redirect when DataSF archives the call after 48 hours." />
    <meta name="theme-color" content="#989898">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@SFPDcallsBot">
    <meta name="twitter:title" content="SFPD calls üöî by Urbanite">
    <meta name="twitter:description" content="Urbanite shows San Francisco law enforcement dispatched calls of service on an interactive map.">
    <meta name="twitter:image" content="https://i.imgur.com/nwbQKWf.png">
    <link rel="stylesheet" href="node_modules/leaflet/dist/leaflet.css" />
    
    <link rel="stylesheet" href="src/css/style.css" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon-180x180.png">
    <link rel="manifest" href="./manifest.json">
    <title>SFPD calls üöî</title>
  </head>
  <body>
    <header></header>
    <main>
      <div id="map"></div>
        <div class="container">
          <div id="affiliate">
            <div class="affiliate-disclaimer">
            <P>Amazon Assoc: I earn from qualifying purchases.</P>
          </div>
          <div class="affiliate-1 hidden">
          <div class="affiliate-target-1">
              <a target="_blank" href="https://www.amazon.com/POM-Pepper-Spray-Flip-Pocket/dp/B08YWRSFJX?th=1&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=3ce460baf80321fc8448daed179028d1&camp=1789&creative=9325"><img src="https://i.imgur.com/5EUVjlV.png" alt="POM Pepper Spray" width="115px"></a>
          </div>
          <h3 class="affiliate-target-name-1">POM Pepper Spray</h3>
        </div>
        <div class="affiliate-2 hidden">
          <div class="affiliate-target-2">
              <a target="_blank" href="https://www.amazon.com/Blink-Outdoor-Wireless-Security-Camera/dp/B086DKSYTS?&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=591f1f3a022322010f536ce9bc1f8c1c&camp=1789&creative=9325" rel="nofollow"><img src="https://m.media-amazon.com/images/I/61jUUHua5nL._SX522_.jpg" alt="Blink Outdoor 3" width="100px"></a>
          </div>
          <h3 class="affiliate-target-name-2">Blink Outdoor 3</h3>
        </div>
        <div class="affiliate-3 hidden">
          <div class="affiliate-target-3">
              <a target="_blank" href='https://www.amazon.com/dp/B0B4BLJN5J/ref=twister_B0CMM21PRL?_encoding=UTF8&amp;psc=1&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=2f0f3b0013538a55e49099152200aaa3&camp=1789&creative=9325' rel='nofollow'>
                <img src="https://i.imgur.com/D4dCgzW.png" alt="Carhartt Hat" width="90px">
              </a>
          </div>
          <h3 class="affiliate-target-name-3">Carhartt Knit</h3>
        </div>
        <div class="affiliate-4 hidden">
          <div class="affiliate-target-4">
              <a target="_blank" href='https://www.amazon.com/Carhartt-Acrylic-Watch-Black-Size/dp/B002G9UDY6/ref=sr_1_1?crid=RBBUQXMQB9W6&amp;keywords=carhartt%252Bhat&amp;qid=1701066943&amp;sprefix=carharrt%252Bhat%252Caps%252C131&amp;sr=8-1&amp;th=1&amp;psc=1&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=2ebb72fc1bf818e273c16627394afe97&camp=1789&creative=9325' rel='nofollow'>
              <img src="https://i.imgur.com/RRkqIhw.png" alt="Carhartt Hat" width="90px">
              </a>
          </div>
          <h3 class="affiliate-target-name-4">Carhartt Knit</h3>
        </div>
        <div class="affiliate-5 hidden">
          <div class="affiliate-target-5">
            <a target="_blank" href="https://www.amazon.com/dp/B0C5S7K1JK/ref=sspa_dk_hqp_detail_aax_0?sp_csd=d2lkZ2V0TmFtZT1zcF9ocXBfc2hhcmVk&amp;th=1&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=2c10af69281f7d4dd0e633cff43c8ab8&camp=1789&creative=9325"><img src="https://i.imgur.com/dZMuhWe.png" alt="Hatch Noise Machine / Alarm" width="90px"></a>
          </div>
          <h3 class="affiliate-target-name-5">Hatch Noise<br>Machine / Alarm</h3>
        </div>
        <div class="affiliate-6 hidden">
          <div class="affiliate-target-6">
              <a target="_blank" href='https://www.amazon.com/Electric-Removable-Battery-Motorcycle-Display/dp/B0CCSWF51X/ref=sr_1_5?crid=38NSZI6WMLMPM&amp;keywords=ebike+2+person&amp;qid=1700805692&amp;sprefix=ebike+2+p%252Caps%252C137&amp;sr=8-5&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=415de7b2f94817f430f88e3e0e367f45&camp=1789&creative=9325' rel='nofollow'><img src="https://i.imgur.com/DSxywND.png" alt="Fat Tire 2 person electric bike" width="115px"></a>
          </div>
          <h3 class="affiliate-target-name-6">2-Person e-bike</h3>
        </div>
      </div>
        <div id="weather">
          <div id="containerTemp"></div>
        </div>
        <button id="project-info-btn">About</button>
        <button id="change-map-btn">Map</button>
        <button id="latest-list-btn">All SF</button>
        <button id="nearby-list-btn">Nearby</button>
        <button id="response-times-list-btn">RTs ‚è±</button>
        <button id="car-breakins-btn">üöô üõ†Ô∏è</button>
        <div id="nearby-container">
          <div id="nearby-info"></div>
        </div>
        <div id="last-updated"></div>
        <div id="neighborhood-text"></div>
        <div class="hidden" id="car-breakins-text"></div>
        <div class="hidden" id="car-breakins-subtext">(Does not include online reports or unreported)</div>
        <div class="hidden" id="call-list-container">
          <h2 id="call-list-heading"></h2>
          <ul id="call-list"></ul>
          <h4 id="call-list-subheading"></h4>
        </div>
        <div class="hidden" id="response-times-container">
          <h2 id="response-times-heading">Median SFPD Response Times, Last 48h</h2>
          <h3 id="response-times-subheading">'Priority A' Calls (Target = 8 mins)</h3>
          <ul id = "response-times-list"></ul>
        </div>
        <div class="hidden" id="project-info-container">
          <div id="project-info">
            <h2 id="project-info-heading">Welcome to Urbanite SF üåÅ  </h2>
            <p>Explore the last 48 hours of law enforcement dispatched calls for service in San Francisco.<br><br>&bull; Move around the map<br>&bull; See call details & response times<br>&bull; Change the map skin<br>&bull; View city-wide or nearby list<br>&bull; Filter car break-ins & thefts<br><br>Data reloads every 5 minutes. Links to raw data redirect when DataSF archives. Follow <a target="_blank" href="https://twitter.com/SFPDcallsBot">@SFPDcallsBot</a> for alerts.<br><br>A personal project designed and developed in the Mission üåØüå¥üå¥ using vanilla JavaScript.<br><br>All calls unverified. Information for ease of access purposes only. Do your own research. Affiliate links cover cloud costs.</p>
          </div></div>
          <div class="hidden" id="addSFDataSource">
            <a target="_blank" href="https://datasf.gitbook.io/datasf-dataset-explainers/law-enforcement-dispatched-calls-for-service" class="centered-link">
              <img src="https://sf.gov/themes/custom/sfgovpl/logo.svg" alt="SF.gov Data" style="width: 10px; height: 10px; ">DataSF
            </a>
          </div>
          <div class="hidden" id="alert"></div>
        </main>
        
        <script type="module">
          window.addEventListener('load', () => {
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker
              .register(new URL('/service-worker.js', import.meta.url), { type: 'module' })
              .then((registration) => {
                // console.log('Service Worker registered:', registration);
              })
              .catch((error) => {
                console.log('Service Worker registration failed:', error);
              });
            }
          });
          </script>
        <script type="module" src="src/js/controller.js"></script>
        <link rel="stylesheet" href="src/css/style2.css" />
      </body>
      </html>
      