<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https: data: https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net; connect-src 'self' https://data.sfgov.org https://api.openweathermap.org https://www.google-analytics.com https://pagead2.googlesyndication.com https://googleads.g.doubleclick.net">
    <meta name="google-adsense-account" content="ca-pub-8239610031167796">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="description" content="SFPD calls is an interactive web app for that provides near real-time access to San Francisco's law enforcement dispatched calls of service (10 minute delay). Explore the latest incidents near you, navigate to SFPD calls in different neighborhoods, and see police response times. Built using vanilla JavaScript, SFPD calls offers a lightweight and fast user experience with zero pay-walls, no ads, and no user data stored. Links auto redirect when DataSF archives the call after 48 hours." />
    <meta name="theme-color" content="#989898">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@SFPDcallsBot">
    <meta name="twitter:title" content="SFPD calls üöî">
    <meta name="twitter:description" content="SFPD calls shows San Francisco law enforcement dispatched calls of service on an interactive map.">
    <meta name="twitter:image" content="https://i.imgur.com/5MdWABv.png">
    <link rel="stylesheet" href="node_modules/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="src/css/style.css" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon-180x180.png">
    <link rel="manifest" href="./manifest.json">
    <title>SFPD calls üöî</title>
  </head>
  <body>
    <header></header>
    <main>
      <div id="map"></div>
        <div class="container">
          <div id="affiliate">
            <div class="affiliate-disclaimer">
            <P>Amazon Assoc: I earn from qualifying purchases.</P>
          </div>
          <div class="affiliate-1 hidden">
            <div class="affiliate-target-1">
              <a target="_blank" href='https://www.amazon.com/Casio-A158WA-1-Water-Resistant-Digital/dp/B000GAYQJ0/ref=zg_bs_g_6358539011_sccl_6/145-5190070-0801643?psc=1&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=fb2a6c864938e36ae3b2fb397d5f6cc3&camp=1789&creative=932' rel='nofollow'><img src="https://i.imgur.com/709lWFR.png" alt="Casio Men's A158WA Stainless Steel Digital Watch" width="80px" height="151.36px" loading="lazy">
              </a>
            </div>
          <h3 class="affiliate-target-name-1">Casio Steel</h3>
        </div>
        <div class="affiliate-2 hidden">
          <div class="affiliate-target-2">
              <a target="_blank" href='https://www.amazon.com/Carhartt-Acrylic-Watch-Black-Size/dp/B0C4V522JG/ref=asc_df_B002G9UDYG/?tag=hyprod-20&amp;linkCode=df0&amp;hvadid=312838910537&amp;hvpos=&amp;hvnetw=g&amp;hvrand=9938031214427691007&amp;hvpone=&amp;hvptwo=&amp;hvqmt=&amp;hvdev=c&amp;hvdvcmdl=&amp;hvlocint=&amp;hvlocphy=9061275&amp;hvtargid=pla-380982493875&amp;mcid=2435264469b132aa900f917c5b8cf910&amp;gclid=CjwKCAiAmZGrBhAnEiwAo9qHifCgYJVjJfOE5j-8jhzuG0MMSVkmOfMyjy-uDEryB6DA7X6VVpKJmxoCQrUQAvD_BwE&amp;th=1&amp;psc=1&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=539a496c175d6d6b1afcaf024edabeff&camp=1789&creative=9325' rel='nofollow'><img src="https://i.imgur.com/CJc0hGh.png" alt="Carhartt Knit Orange" width="90px"  loading="lazy">
              </a>
          </div>
          <h3 class="affiliate-target-name-2">Carhartt Knit</h3>
        </div>
        <div class="affiliate-3 hidden">
          <div class="affiliate-target-3">
              <a target="_blank" href='https://www.amazon.com/New-Apple-AirPods-Max-Green/dp/B08PZJ8FZ8/?asc_source=verso&amp;asc_campaign=6489e690df35cea1cbb2fd8f%257C6mocU9Jdjch3hMT6Q6H5k8&amp;asc_refurl=https%253A%252F%252Fwww.glamour.com%252Fgallery%252Fbest-selling-amazon-products&amp;ascsubtag=6489e690df35cea1cbb2fd8f&amp;tag=glamour0d7-20&amp;th=1&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=72e4948615eb73fe6e35c88db36ffc2f&camp=1789&creative=9325' rel='nofollow'><img src="https://i.imgur.com/jiQYMYR.png" alt="Apple AirPods Max headphones" width="115px"  loading="lazy">
              </a>
          </div>
          <h3 class="affiliate-target-name-3">Apple AirPods Max</h3>
        </div>
        <div class="affiliate-4 hidden">
          <div class="affiliate-target-4">
              <a target="_blank" href='https://www.amazon.com/Apple-MX542AM-A-AirTag-Pack/dp/B0932QJ2JZ/ref=zg_bs_g_electronics_sccl_1/145-5190070-0801643?psc=1&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=e298c53f8217a95ee09299cb0af35bf9&camp=1789&creative=9325' rel='nofollow'><img src="https://i.imgur.com/1L5pUzU.png" alt="Apple AirTags" width="120px" height="64.8px" loading="lazy">
              </a>  
          </div>
          <h3 class="affiliate-target-name-4">Apple AirTags</h3>
        </div>
        <div class="affiliate-5 hidden">
          <div class="affiliate-target-5">
            <a target="_blank" href='https://www.amazon.com/Carhartt-Acrylic-Watch-Black-Size/dp/B0B4BMSBFL/ref=asc_df_B002G9UDYG/?tag=hyprod-20&amp;linkCode=df0&amp;hvadid=312838910537&amp;hvpos=&amp;hvnetw=g&amp;hvrand=9938031214427691007&amp;hvpone=&amp;hvptwo=&amp;hvqmt=&amp;hvdev=c&amp;hvdvcmdl=&amp;hvlocint=&amp;hvlocphy=9061275&amp;hvtargid=pla-380982493875&amp;mcid=2435264469b132aa900f917c5b8cf910&amp;gclid=CjwKCAiAmZGrBhAnEiwAo9qHifCgYJVjJfOE5j-8jhzuG0MMSVkmOfMyjy-uDEryB6DA7X6VVpKJmxoCQrUQAvD_BwE&amp;th=1&amp;psc=1&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=13b71945a88a7c826a237a6ae9419233&camp=1789&creative=9325' rel='nofollow'><img src="https://i.imgur.com/2X5ZXtN.png" alt="Carhartt Hat Blue" width="90px" loading="lazy">
            </a>
          </div>
          <h3 class="affiliate-target-name-5">Carhartt Knit</h3>
        </div>
        <div class="affiliate-6 hidden">
          <div class="affiliate-target-6">
            <a target="_blank" href="https://www.amazon.com/Blink-Outdoor-Wireless-Security-Camera/dp/B086DKSYTS?&_encoding=UTF8&tag=urbanitesf1-20&linkCode=ur2&linkId=591f1f3a022322010f536ce9bc1f8c1c&camp=1789&creative=9325" rel="nofollow"><img src="https://i.imgur.com/ew1gTYg.jpg" alt="Blink Outdoor 3" width="100px"  loading="lazy" style="border-radius: 10px;"></a>
          </div>
          <h3 class="affiliate-target-name-6">Blink Outdoor 3</h3>
        </div>
      </div>
        <div id="weather">
          <div id="containerTemp"></div>
        </div>
        <button id="project-info-btn">About</button>
        <button id="change-map-btn">Map</button>
        <button id="latest-list-btn">All SF</button>
        <button id="nearby-list-btn">Nearby</button>
        <button id="response-times-list-btn">RTs ‚è±</button>
        <button id="car-breakins-btn">üöô üõ†Ô∏è</button>
        <div id="nearby-container">
          <div id="nearby-info"></div>
        </div>
        <div id="last-updated"></div>
        <div id="neighborhood-text"></div>
        <div class="hidden" id="car-breakins-text"></div>
        <div class="hidden" id="car-breakins-subtext">(Does not include online reports or unreported)</div>
        <div class="hidden" id="call-list-container">
          <h2 id="call-list-heading"></h2>
          <ul id="call-list"></ul>
          <h4 id="call-list-subheading"></h4>
        </div>
        <div class="hidden" id="response-times-container">
          <h2 id="response-times-heading">Median SFPD Response Times, Last 48h</h2>
          <h3 id="response-times-subheading">'Priority A' Calls (Target = 8 mins)</h3>
          <ul id = "response-times-list"></ul>
        </div>
        <div class="hidden" id="project-info-container">
          <div id="project-info">
            <h2 id="project-info-heading">Welcome to SFPD Calls üåÅ  </h2>
            <p>Explore the last 48 hours of law enforcement dispatched calls for service in San Francisco.<br><br>&bull; Move around the map<br>&bull; See call details & response times<br>&bull; Change the map skin<br>&bull; View city-wide or nearby list<br>&bull; Filter car break-ins & thefts<br><br>Data reloads every 5 minutes. Links to raw data redirect when DataSF archives. Follow <a target="_blank" href="https://twitter.com/SFPDcallsBot">@SFPDcallsBot</a> for alerts.<br><br>A personal project designed and developed in the Mission üåØüå¥üå¥ using vanilla JavaScript.<br><br>All calls unverified. Information for ease of access purposes only. Do your own research. Affiliate links cover cloud costs.</p>
          </div></div>
          <div class="hidden" id="addSFDataSource">
            <a target="_blank" href="https://datasf.gitbook.io/datasf-dataset-explainers/law-enforcement-dispatched-calls-for-service" class="centered-link">
              <img src="https://sf.gov/themes/custom/sfgovpl/logo.svg" alt="SF.gov Data" loading="lazy" style="width: 10px; height: 10px;">DataSF
            </a>
          </div>
          <div class="hidden" id="alert"></div>
        </main>
        
        <script type="module">
          window.addEventListener('load', () => {
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker
              .register(new URL('/service-worker.js', import.meta.url), { type: 'module' })
              .then((registration) => {
                // console.log('Service Worker registered:', registration);
              })
              .catch((error) => {
                console.log('Service Worker registration failed:', error);
              });
            }
          });
          </script>
        <script type="module" src="src/js/controller.js"></script>
        <link rel="stylesheet" href="src/css/style2.css" />
      </body>
      </html>
      